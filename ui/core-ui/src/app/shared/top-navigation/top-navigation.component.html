<mat-toolbar class="core-nav-toolbar">
  <!-- Left section: CORE System brand -->
  <div class="nav-brand">
    <mat-icon class="core-logo">memory</mat-icon>
    <span class="core-title">
      <span class="core-primary">CORE</span>
      <span class="core-secondary">System</span>
    </span>
    <div class="status-indicator" [class]="systemStatus">
      <div class="status-pulse"></div>
    </div>
  </div>

  <!-- Breadcrumb Navigation -->
  @if (breadcrumbs.length > 1) {
    <div class="breadcrumb-section">
      <button mat-icon-button class="back-btn" (click)="goBack()" [disabled]="breadcrumbs.length <= 1">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <div class="breadcrumb-trail">
        @for (breadcrumb of breadcrumbs; track $index; let i = $index; let last = $last) {
          <a class="breadcrumb-link" 
             [class.active]="breadcrumb.isActive" 
             (click)="navigateTo(breadcrumb.url)"
             [attr.aria-current]="breadcrumb.isActive ? 'page' : null">
            {{ breadcrumb.label }}
          </a>
          @if (!last) {
            <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
          }
        }
      </div>
    </div>
  }

  <!-- Spacer -->
  <span class="nav-spacer"></span>

  <!-- Right section: Command buttons -->
  <div class="nav-controls">
    <!-- Agent Management -->
    <button mat-icon-button class="nav-btn" #agentBtn [matMenuTriggerFor]="agentMenu" aria-label="Agents">
      <mat-icon aria-hidden="false" matBadge="{{agentCount}}" matBadgeColor="accent" matBadgeSize="small">smart_toy</mat-icon>
    </button>
    <mat-menu #agentMenu="matMenu" class="command-menu">
      <button mat-menu-item>
        <mat-icon>add</mat-icon>
        <span>Create Agent</span>
      </button>
      <button mat-menu-item>
        <mat-icon>dashboard</mat-icon>
        <span>Agent Configuration</span>
      </button>
      <button mat-menu-item>
        <mat-icon>settings</mat-icon>
        <span>Agentic Workforce</span>
      </button>
      <button mat-menu-item>
        <mat-icon>book</mat-icon>
        <span>Agent Marketplace</span>
      </button>
    </mat-menu>

    <!-- Workflow Management -->
    <button mat-icon-button class="nav-btn" #workflowBtn [matMenuTriggerFor]="workflowMenu" aria-label="Workflows">
      <mat-icon aria-hidden="false" matBadge="{{activeWorkflows}}" matBadgeColor="primary" matBadgeSize="small">account_tree</mat-icon>
    </button>
    <mat-menu #workflowMenu="matMenu" class="command-menu">
      <button mat-menu-item>
        <mat-icon>add_box</mat-icon>
        <span>Active Workflows</span>
      </button>
      <button mat-menu-item>
        <mat-icon>timeline</mat-icon>
        <span>Create New Workflow</span>
      </button>
      <button mat-menu-item>
        <mat-icon>history</mat-icon>
        <span>Workflow Configuration</span>
      </button>
    </mat-menu>

    <!-- System Resources -->
    <button mat-icon-button class="nav-btn" #systemBtn [matMenuTriggerFor]="systemMenu">
      <mat-icon>monitor_heart</mat-icon>
    </button>
    <mat-menu #systemMenu="matMenu" class="command-menu">
      <button mat-menu-item>
        <mat-icon>memory</mat-icon>
        <span>System Monitor</span>
      </button>
      <button mat-menu-item>
        <mat-icon>storage</mat-icon>
        <span>Resource Pool</span>
      </button>
      <button mat-menu-item>
        <mat-icon>security</mat-icon>
        <span>Security Center</span>
      </button>
    </mat-menu>

    <!-- Command Terminal -->
    <button mat-icon-button class="nav-btn terminal-btn">
      <mat-icon>terminal</mat-icon>
    </button>

    <!-- Settings -->
    <button mat-icon-button class="nav-btn settings-btn">
      <mat-icon>settings</mat-icon>
    </button>
  </div>
</mat-toolbar>
